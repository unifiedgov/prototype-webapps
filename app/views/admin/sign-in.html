{% extends "admin-anon_layout.html" %}

{% block page_title %}
  Sign in
{% endblock %}

{% block content %}

<form action="all-applications" class="sign-in" novalidate>

  <h1 class="govuk-heading-l">Sign in</h1>

  {% if  data['show'] == "timeout" %}

    {{ govukErrorSummary({
      "titleText": "You've been signed out",
      "classes": "system-error",
      "errorList": [
        {
          "text": "You were inactive for 2 hours so we've signed you out to secure your account"
        }
      ]
    }) }}

  {% endif %}

  {% if  data['show'] == "cant-signin" %}

    {{ govukErrorSummary({
      "titleText": "Can't sign in",
      "classes": "system-error",
      "errorList": [
        {
          "html": '<p>We\'re having problems signing you in. <br>
                   Try again, or visit our <a href="">service status page</a>.</p>'
        }
      ]
    }) }}

  {% endif %}

  {% set formIDs = {
    email: { id: "sign-in-email" },
    password: { id: "sign-in-password" }
  }%}

  {% if  data['show'] == "errors" %}

    {% set errorArray = {
      emailError: { text: "Enter a valid email address"},
      passwordError: { text: "Enter a valid password"}
    }%}

    {{ govukErrorSummary({
      "titleText": "Fix the following errors:",
      "errorList": [
        {
          "text": errorArray.emailError.text,
          "href": '#' + formIDs.email.id
        },
        {
          "text": errorArray.passwordError.text,
          "href": '#' + formIDs.password.id
        }
      ]
    }) }}

  {% endif %}


  {{ govukInput({
    label: {
      "text": "Email address"
    },
    errorMessage: errorArray.emailError,
    type: "email",
    id: formIDs.email.id,
    name: formIDs.email.id
  }) }}

  {{ govukInput({
    "label": {
      "text": "Password"    
    },
    errorMessage: errorArray.passwordError,
    type: "password",
    id: formIDs.password.id,
    name: formIDs.password.id
  }) }}

  {{ govukButton({
    "text": "Sign in"
  }) }}

  <p>
    <a href="reset-password">Reset your password</a>
  </p>
  
</form>

{% endblock %}
