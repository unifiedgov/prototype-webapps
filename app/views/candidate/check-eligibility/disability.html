{% extends "layout.html" %}

{% set pageHeading = 'What\'s the main reason ' + you + ' need a Blue Badge?' %}

{% block page_title %}
  {{pageHeading}} - {% if serviceName %} {{ serviceName }} {% endif %}
{% endblock %}

{% block content %}

<div class="govuk-width-container">
  {{ govukBackLink({
      "text": "Back",
      "href": "javascript: window.history.go(-1)"
    }) }}
  <main role="main" class="govuk-main-wrapper">

    <div class="govuk-grid">
      <div class="govuk-grid__item govuk-grid__item--two-thirds">

        <form action="disability-backend">
          <div class="expanding-panel-container">

            {% if  data['council-name'] === "wales" %}
  
            {% set walesPermanent = "" %}

            {% else %}

            {% set walesPermanent = "permanent" %}

            {% endif %}

            {% if  data['age'] > 16 %}

              {% set differentOptions = [
                {
                  "value": "blind",
                  "text": you | capitalize + "'re registered blind"
                },
                {
                  "value": "terminal",
                  "text": you | capitalize + " have a terminal illness and are expected to live less than 6 months"
                },
                {
                  "value": "problems-walking",
                  "text": you | capitalize + " have a " + walesPermanent + " disability which means " + you + " can't walk or find walking very difficult" 
                },
                {
                  "value": "arms",
                  "text": you | capitalize + " have a severe disability in both arms and drive regularly, but can't operate parking meters"
                },
                {
                  "value": "none",
                  "text": "None of these reasons",
                  "id": "disability-none"
                }
              ]
              %}

            {% elif data['age'] <= 2 %}

            {% set differentOptions = [
                {
                  "value": "blind",
                  "text": you | capitalize + "'re registered blind"
                },
                {
                  "value": "terminal",
                  "text": you | capitalize + " have a terminal illness and are expected to live less than 6 months"
                },
                {
                  "value": "child-problems-walking",
                  "text": you | capitalize + " need to be accompanied by bulky medical equipment"
                },
                {
                  "value": "child-close-to-vehicle",
                  "text": you | capitalize + " need to be near a vehicle to receive or be taken for treatment"
                },
                {
                  "value": "none",
                  "text": "None of these describe " + you + " medical condition or disability",
                  "id": "disability-none"
                }
              ]
            %}

            {% else %}

            {% set differentOptions = [
                {
                  "value": "blind",
                  "text": you | capitalize + "'re registered blind"
                },
                {
                  "value": "terminal",
                  "text": you | capitalize + " have a terminal illness and are expected to live less than 6 months"
                },
                {
                  "value": "problems-walking",
                  "text": you | capitalize + " have a " + walesPermanent + " disability which means " + you + " can't walk or find walking very difficult" 
                },
                {
                  "value": "none",
                  "text": "None of these reasons",
                  "id": "disability-none"
                }
              ]
            %}

            {% endif %}
            
            {{ govukRadios({
              "idPrefix": "disability",
              "name": "disability",
                "attributes": {
                  "data-expanding-radios": "true"
                },
              "fieldset": {
                "legendHtml": '<h1 class="govuk-heading-l">' + pageHeading  + '</h1>'
              },
              "items": differentOptions
            }) }}


            <div class="expanding-panel" data-expanded-by="disability-none">
              <div class="govuk-details__text">
                {{ govukTextarea({
                  "name": "describe",
                  "id": "describe",
                  "label": {
                    "text": "Describe " + your + " medical condition or disability"
                  }
                }) }}
              </div>
            </div>
          </div>
          
          
          {{ govukButton({
            "text": "Continue"
          }) }}
        </form>

      </div>

      <div class="govuk-grid__item govuk-grid__item--one-third">

        </div>
    </div>
  </main>
</div>

{% endblock %}
