{% extends "layout.html" %}
{% set hasSaveClass = 'show-save-button' %}

{% set pageHeading = "Have " + you + " had any treatments?" %}

{% block page_title %}
  {{pageHeading}} - {% if serviceName %} {{ serviceName }} {% endif %}
{% endblock %}

{% block content %}

<div class="govuk-width-container">
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-one-half">
      {{ govukBackLink({
          "text": "Back",
          "href": "javascript: window.history.go(-1)"
        }) 
      }}
    </div>
    <div class="govuk-grid-column-one-half">
      <p class="govuk-body save-progress-container hidden-mobile"><a href="/apply-for-a-blue-badge/progress-saved" class="save-progress-link">Save {{your}} progress</a></p>
    </div>
  </div>
  <main role="main" class="govuk-main-wrapper">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">

        {% set treatmentHtml %}
          {% if tableRows.length > 0 %}
    
            <p class="govuk-body">List any surgeries, treatments or clinics {{ you }}’ve had for your condition.</p>

            {{ govukTable({
              "head": [
                {
                  "text": "Description"
                },
                {
                  "text": "When"
                },
                {
                  "text": ""
                }
              ],
              "rows": tableRows
            }) }}

            <p class="govuk-body"><a href="add-treatment">Add another treatment</a></p>

          {% else %}
          
          <p class="govuk-body">List any surgeries, treatments or clinics {{ you }}’ve had for your condition.</p>

          {{ govukTable({
            "head": [
              {
                "text": "Description"
              },
              {
                "text": "When"
              },
              {
                "text": ""
              }
            ],
            "rows": ""
          }) }}

          <p class="govuk-body"><a href="add-treatment">Add first treatment</a></p>

          {% endif %}
        {% endset -%}

          {{ govukRadios({
            "idPrefix": "had-treatment",
            "name": "had-treatment",
            "fieldset": {
              "legend": {
                "text": pageHeading,
                "isPageHeading": true,
                "classes": 'govuk-fieldset__legend--l'
              }
            },
            "items": [
              {
                "value": "yes",
                "text": "Yes",
                "checked": tableRows.length > 0,
                "conditional": {
                  "html": treatmentHtml
                }
              },
              {
                "value": "no",
                "text": "No"
              }
            ]
          }) 
        }}

        {{ govukButton({
          "text": "Continue",
          "href": formAction
        }) }}

        <!-- Has save -->

      </div>

    </div>
    <p class="govuk-body save-progress-container hidden-tablet"><a href="/apply-for-a-blue-badge/progress-saved" class="save-progress-link">Save {{your}} progress</a></p>
</main>
</div>

{% endblock %}
